<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Super Fancy Flask Extended</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="topbar">
    <div class="controls">
      <label for="trackSelect">Wähle Musik:</label>
      <select id="trackSelect">
        <option value="Lowtone Music - Chill Calm.mp3">🎵 Chill Calm (1)</option>
        <option value="Lowtone Music - Chill Journey.mp3">🎶 Chill Journey (2)</option>
        <option value="snoozy beats - night chill.mp3">🎧 Night Chill (3)</option>
      </select>

      <label for="volume">🔊</label>
      <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5">

      <button id="muteBtn">🔇 Mute</button>
      <button id="colorBtn">🎨 Farbwechsel</button>
    </div>
    <p class="slogan" id="quoteDisplay">„Glaube an Wunder, Liebe und Glück!“</p>
    <p id="visitorDisplay">👁️ Besucher: <span id="visitorCount">{{ visitor_count }}</span></p>

  </header>

  <!-- Hintergrundmusik -->
  <audio id="bgMusic" autoplay loop>
    <source src="{{ url_for('static', filename='Lowtone Music - Chill Calm.mp3') }}" type="audio/mp3">
    Dein Browser unterstützt kein Audio.
  </audio>

  <!-- Emoji-Regen (nur stilisiert) -->
  <div id="emoji-rain">
    <!-- optional: JS für fallende Emojis -->
  </div>
<button id="toggleThemeBtn">🌓 Dark/Light Mode</button>

<script>
  // Zitate automatisch aus JSON-Datei laden
  const quoteDisplay = document.getElementById("quoteDisplay");

  async function loadQuotes() {
    try {
      const response = await fetch("/static/quotes.json");
      const quotes = await response.json();

      function rotateQuotes() {
        quoteDisplay.style.opacity = 0;
        setTimeout(() => {
          const index = Math.floor(Math.random() * quotes.length);
          quoteDisplay.textContent = quotes[index];
          quoteDisplay.style.opacity = 1;
        }, 500);
      }

      rotateQuotes();
      setInterval(rotateQuotes, 8000);
    } catch (error) {
      quoteDisplay.textContent = "Zitat konnte nicht geladen werden.";
      console.error(error);
    }
  }

  loadQuotes();

  // Dark Mode toggle mit localStorage
  const toggleThemeBtn = document.getElementById("toggleThemeBtn");

  function setTheme(theme) {
    document.body.dataset.theme = theme;
    localStorage.setItem("theme", theme);
  }

  toggleThemeBtn.addEventListener("click", () => {
    const current = document.body.dataset.theme || "light";
    setTheme(current === "light" ? "dark" : "light");
  });

  // Beim Laden gewählten Modus wiederherstellen
  const savedTheme = localStorage.getItem("theme") || "light";
  setTheme(savedTheme);
</script>

</body>
</html>
